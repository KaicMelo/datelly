<!DOCTYPE HTML>
<html lang="pt-br">
	<head>
		<meta charset="UTF-8">

		<title>Datelly - Home</title>
		
		<!-- bootstrap - link cdn -->
        <link rel="stylesheet" href="css/bootstrap-4.5.0.min.css">
        <link rel="stylesheet" href="css/dataTables.min.css">

        <!-- <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.21/css/jquery.dataTables.css">
  
        <script type="text/javascript" charset="utf8" src="https://cdn.datatables.net/1.10.21/js/jquery.dataTables.js"></script> -->
        <script type="text/javascript" charset="utf8" src="js/jquery-3.5.1.min.js"></script>
        <script type="text/javascript" charset="utf8" src="js/bootstrap4.min.js"></script>
        <script type="text/javascript" charset="utf8" src="js/dataTables.min.js"></script>

        <!-- <script src="js/dataTables.min.js"></script>
        <script src="js/jquery-3.5.1.min.js"></script> -->
        <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js"></script> -->
      </head>
		<!-- estilo -->
        <!-- <link href="css/style.css" rel="stylesheet"> -->
        <style>
            .entryInfo{
                z-index: 4;
                position: absolute; 
                width: 70%;
            }
        </style>

        </style>
	</head>

	<body>

        <!-- <div class="modal" tabindex="-1" role="dialog" id="modalNotification">
            <div class="modal-dialog" role="document">
              <div class="modal-content">
                <div class="modal-header">
                  <h5 class="modal-title">Título do modal</h5>
                  <button type="button" class="close" data-dismiss="modal" aria-label="Fechar">
                    <span aria-hidden="true">&times;</span>
                  </button>
                </div>
                <div class="modal-body">
                  <p>Texto do corpo do modal, é aqui.</p>
                </div>
                <div class="modal-footer">
                  <button type="button" class="btn btn-secondary" data-dismiss="modal">Fechar</button>
                  <button type="button" class="btn btn-primary">Salvar mudanças</button>
                </div>
              </div>
            </div>
          </div> -->

        <nav class="navbar navbar-expand-sm bg-dark navbar-dark fixed-top">
        <a class="navbar-brand" href="#">Logo</a>
        <ul class="navbar-nav">
            <li class="nav-item">
            <a class="nav-link" href="#">Link</a>
            </li>
            <li class="nav-item">
            <a class="nav-link" href="#">Link</a> 
            </li>
        </ul>
        </nav>

        <hr>

        <form id="formInsert">
            <div class="form-group">
                <label for="newGoals">Nova Meta</label>
                <div class='row'>
                    <div class='col-6'>
                        <input type="text" class="form-control" id="newGoals" aria-describedby="emailHelp" placeholder="Insira uma nova meta">
                    </div>
            
                    <div class='col-3'>
                        <button type="button" class="btn btn-primary" id="saveGoal" >Salvar</button>
                    </div> 
                </div>
            </div>
        </form> 
         
        <table id="table_id"  class="table table-striped table-bordered" style="width:100%">
            <thead>
                <tr>
                    <th>id</th>
                    <th>Meta</th>
                    <th>Criada Por</th>
                    <th>Data Conclusão</th>
                    <th>Data Criação</th> 
                    <th>#</th> 
                </tr>
            </thead>
            <tbody>
                <% for(var i=0; i < goals.length; i++){%>
                <tr>
                    <td><%=goals[i].id %></td>  
                    <td><%=goals[i].name %></td>  
                    <td><%=goals[i].rk_user_id %></td>  
                    <td><%=goals[i].concluded %></td>  
                    <td><%=goals[i].created_at %></td>
                    <td>
                        <button type="button" class="btn btn-primary">Salvar</button>
                        <button type="button" class="btn btn-danger">Excluir</button>
                        <button type="button" class="btn btn-warning">Editar</button>
                    </td>
                </tr> 
                <%}%> 
            </tbody>
        </table> 
    </body>
</html> 
        <!-- <script src="/socket.io/socket.io.js"></script> -->
        
        <script>    
        
            // var socket = io('http://localhost/3000');

            // socket.on('sendEntrySystem', function(data){
            //     $('#entryInfo').text('');

            //     var html ="<p>"+ data.login+data.mensagem;+"</p>"
                 
            //     $('#entryInfo').append(html); 
                
            //     $('#entryInfo').show(4000);  
            //     $('#entryInfo').hide(5000);  
            // });  

            $(document).ready(function() {
                // $('#entryInfo').hide();

                $("#saveGoal").click(function(){
                    var request = $.ajax({
                        url: "/createGoals",
                        method: "POST",
                        data: { name : $("#newGoals").val() },
                        dataType: "html"
                    });
                    request.done(function(msg) { 
                        console.log(msg);
                        $('#modalNotification').on('shown.bs.modal', function () {
                            $("#modalNotification").modal();
                        });
                    });
                    request.fail(function( jqXHR, textStatus ) {
                        console.log('algo deu errado');
                    });
                });        
            }); 
        </script> 
    </body>
</html> 
